{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}MedJ{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #fdfee9; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; }
        .navbar { background-color: #43b8cf; padding: 0.75rem 1.5rem; border-radius: 0 0 20px 20px; }
        .navbar .nav-link { color: #FDFEE9 !important; font-weight: 500; margin-right: 1rem; }
        .navbar .nav-link.active { background-color: #0a4e75; color: #FDFEE9 !important; border-radius: 8px; padding: 6px 12px; }
        .lang-icon { height: 24px; width: 24px; cursor: pointer; }
        .profile-icon { height: 32px; width: 32px; cursor: pointer; }
        .nav-container { display: flex; align-items: center; justify-content: space-between; }
        .main-content { padding: 2rem; }
    </style>
</head>
<body>
<nav class="navbar nav-container">
    <!-- Language switcher on the left -->
    <div class="d-flex align-items-center">
        <form action="{% url 'set_language' %}" method="post" class="m-0 p-0">
            {% csrf_token %}
            <input type="hidden" name="next" value="{{ request.get_full_path }}">
            <input type="hidden" name="language" value="{% if LANGUAGE_CODE == 'bg' %}en-us{% else %}bg{% endif %}">
            <button type="submit" class="btn p-0 border-0 bg-transparent">
                <img src="{% static 'img/languageicon.png' %}" alt="Language" class="lang-icon">
            </button>
        </form>
    </div>

    <!-- Main navigation tabs -->
    <ul class="nav flex-grow-1 justify-content-center">
        <li class="nav-item">
            <a class="nav-link {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}" href="{% url 'dashboard' %}">{% trans 'Табло' %}</a>
        </li>
        <li class="nav-item">
            <a class="nav-link {% if request.resolver_match.url_name == 'casefiles' %}active{% endif %}" href="{% url 'casefiles' %}">{% trans 'Досиe' %}</a>
        </li>
        <li class="nav-item">
            <a class="nav-link {% if request.resolver_match.url_name == 'personalcard' %}active{% endif %}" href="{% url 'personalcard' %}">{% trans 'Л.Картон' %}</a>
        </li>
        <li class="nav-item">
            <a class="nav-link {% if request.resolver_match.url_name == 'upload' %}active{% endif %}" href="{% url 'upload' %}">{% trans 'Документи' %}</a>
        </li>
    </ul>

    <!-- User dropdown on the right -->
    <div class="d-flex align-items-center">
        <img src="{% static 'img/profileicon.png' %}" alt="Profile" class="profile-icon me-2">
        <div class="dropdown">
            <button class="btn dropdown-toggle bg-transparent border-0 p-0 text-light" data-bs-toggle="dropdown">
                {{ request.user.username }}
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
                <li><a class="dropdown-item" href="{% url 'history' %}">{% trans 'История на качвания' %}</a></li>
                <li><a class="dropdown-item" href="{% url 'profile' %}">{% trans 'Профил' %}</a></li>
                <li><a class="dropdown-item" href="{% url 'doctors' %}">{% trans 'Специалисти' %}</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a href="{% url 'logout' %}" class="dropdown-item">{% trans 'Изход' %}</a></li>
            </ul>
        </div>
    </div>
</nav>
<main class="main-content">
    {% block content %}{% endblock %}
</main>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
