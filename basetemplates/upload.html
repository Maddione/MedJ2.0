{% extends "base_app.html" %}
{% load i18n %}
{% load static %} {# <-- Уверете се, че static е зареден #}

{% block content %}
<div class="row justify-content-center mt-4">
  <div class="col-md-6 bg-light p-4 rounded">
    <h4 class="mb-3 text-center">{% trans 'Качване на документ' %}</h4>
    <form id="uploadForm" method="post" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="mb-3">
        <label for="file_input" class="form-label">{% trans '1. Изберете файл (Изображение или PDF):' %}</label>
        <input type="file" id="file_input" name="document" accept="image/*,application/pdf" class="form-control">
      </div>
      <div class="mb-3">
        <label for="doc_kind" class="form-label">{% trans '2. Посочете вид на документа:' %}</label>
        <select id="doc_kind" name="doc_kind" class="form-select">
          <option value="" selected disabled>{% trans 'Моля, изберете...' %}</option>
          <option value="blood">{% trans 'кръвни изследвания' %}</option>
          <option value="outpatient">{% trans 'амбулаторен лист' %}</option>
          <option value="epicrisis">{% trans 'епикриза' %}</option>
          <option value="referral">{% trans 'направление' %}</option>
          <option value="prescription">{% trans 'рецепта' %}</option>
        </select>
      </div>
      <div class="mb-3">
        <label for="file_type" class="form-label">{% trans '3. Посочете тип на файла:' %}</label>
        <select id="file_type" name="file_type" class="form-select">
          <option value="" selected disabled>{% trans 'Моля, изберете...' %}</option>
          <option value="image">{% trans 'изображение' %}</option>
          <option value="pdf">PDF</option>
        </select>
      </div>
      <button id="upload-button" type="submit" class="btn btn-primary w-100 mt-2" disabled>
        {% trans 'Качи и анализирай' %}
      </button>
    </form>
  </div>
</div>

<div id="results-section" class="row justify-content-center mt-4" style="display: none;">
    <div class="col-md-8">
        <h3 class="text-center">{% trans 'Резултати от анализа' %}</h3>
        <hr>
        <div id="result-summary" class="alert alert-info"></div>
        <div id="result-html-table"></div>
    </div>
</div>


<script src="{% static 'js/upload_logic.js' %}" defer></script>

{% endblock %}