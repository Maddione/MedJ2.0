1. Текущи задачи (Имплементация на двустъпков процес)
Целта е да изградим пълния процес: Потребителят качва файл -> получава OCR текст за редакция -> одобрява го -> текстът се изпраща към GPT и резултатите се записват в базата.
1.1Промени в Backend (за да поддържа двете стъпки):
URL адреси (urls.py):
Трябва да имаме три пътя:
/upload/ -> Зарежда основната страница (както е сега).
/perform-ocr/ -> Нов адрес, който приема файл и връща OCR текст.
/analyze-document/ -> Нов адрес, който приема редактиран текст и данни, извиква GPT и записва в базата.
Основна логика (views.py):
Трябва да имаме три отделни функции (views), които отговарят на горните URL адреси. Вече Ви бях предоставил код за тях, който ще адаптираме.
Модел (models.py):
Добавяне на поле file_hash в MedicalDocument за предотвратяване на дубликати.
База данни:
Изпълнение на makemigrations и migrate след промяната в модела.
1.2.Промени във Frontend (за да управлява двете стъпки):
HTML структура (upload.html):
Имплементиране на новия мокъп с двете падащи менюта ("Категория" и "Специалист").
Добавяне на скрито поле (<textarea>) за редактиране на OCR текста.
Добавяне на втори бутон ("Одобри и анализирай"), който също първоначално е скрит.
JavaScript логика (upload_logic.js):
Пълно пренаписване на скрипта, за да управлява сложния процес:
Следене на менютата и активиране на бутона за качване.
При натискане, изпращане на първа AJAX заявка към /perform-ocr/.
При успешен отговор, попълване на скритото текстово поле и показването му заедно с втория бутон.
При натискане на втория бутон, изпращане на втора AJAX заявка към /analyze-document/ с редактирания текст и данните от менютата.
При финален успех, показване на резултатите.
2. Следващи стъпки - Анонимизатор
Frontend изпраща редактирания текст към analyze_document.
views.py получава текста.
ТУК СЕ ИЗВИКВА АНОНИМИЗАТОРЪТ: views.py подава текста на нова функция, която премахва/замества ЕГН, имена, телефони и т.н.
Анонимизираният текст се изпраща към GPT.
Отговорът от GPT се обработва и записва в базата данни.
По този начин никаква чувствителна лична информация не напуска вашия сървър.

2.1.Разработване на страница "История на документите":
Показване на списък с всички запазени документи.
Имплементиране на филтриране по тагове и дата.
Добавяне на опция за изтегляне на избрани документи.
2.2.Попълване на потребителския профил:
Довършване на секциите "Личен картон" (PatientProfile) и "Лекари" (Doctor).
3. Запомнени идеи за по-далечно бъдеще
(Тази също остава същата)
3.1Деплоймънт на сайта (Live версия):
Качване на сайта на вашия домейн, използвайки Google Cloud (Compute Engine), Nginx, Gunicorn и SSL сертификат.